<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원 탈퇴</title>
    <link rel="stylesheet" href="/">
</head>
<script>
const memberDelete = async() => {
	const userid = '[[${session.userid}]]';
	if(confirm("정말로 탈퇴하시겠습니까?")){
		let formData = new FormData();
		formData.append("userid", userid);
		await fetch('/member/memberDelete',{
			method : 'POST',
			body : formData
		}).then((response) => response.json())
		.then((data) => {
			if(data.message == 'GOOD'){
				alert('계정이 삭제되었습니다.');
			document.location.href = '/member/login';
			}
		}).catch((error) => {
			alert('시스템 오류로 인해 회원 탈퇴가 되지 않았습니다.');
			console.log("error = " + error);
		});
	}else{}
}
</script>
<body>
	<div id="main">
    <div id="logoutView" class="LogoutView">
		<h1>[[${userid}]] ([[${username}]])님 정말로 회원 탈퇴하시겠습니까?</h1>
		<h1>탈퇴를 원하신다면 밑에 있는 버튼을 눌러주세요.</h1>
		<br><br>
		<input type="button" id="btn_cancel" class="btn_cancel" value="탈퇴하기" onclick="memberDelete()">
		<input type="button" id="btn_cancel" class="btn_cancel" value="취소" onclick="history.back()">
	</div>
	</div>
</body>
</html>
